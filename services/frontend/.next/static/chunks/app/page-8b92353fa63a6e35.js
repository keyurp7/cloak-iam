(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4751:function(e,n,t){Promise.resolve().then(t.bind(t,6117))},6117:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return r}});var a=t(7437),s=t(3464),i=t(2265),l=t(257);function r(){let[e,n]=(0,i.useState)("admin@local"),[t,r]=(0,i.useState)("changeit!"),[o,u]=(0,i.useState)(null),[c,d]=(0,i.useState)(null),[p,h]=(0,i.useState)(null),f=l.env.NEXT_PUBLIC_BACKEND_URL||l.env.BACKEND_URL||"http://localhost:8000";async function m(n){n.preventDefault(),h(null);try{let n=new URLSearchParams;n.append("username",e),n.append("password",t);let a=await s.Z.post("".concat(f,"/api/auth/token"),n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});u(a.data.access_token)}catch(e){var a,i;h((null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(a=i.data)||void 0===a?void 0:a.detail)||"Login failed")}}async function v(){o&&d((await s.Z.get("".concat(f,"/api/me"),{headers:{Authorization:"Bearer ".concat(o)}})).data)}return(0,a.jsxs)("main",{style:{maxWidth:420,margin:"40px auto",fontFamily:"Inter, system-ui, sans-serif"},children:[(0,a.jsx)("h1",{children:"CLOAK IAM"}),(0,a.jsxs)("form",{onSubmit:m,style:{display:"grid",gap:12},children:[(0,a.jsxs)("label",{children:["Username",(0,a.jsx)("input",{value:e,onChange:e=>n(e.target.value)})]}),(0,a.jsxs)("label",{children:["Password",(0,a.jsx)("input",{type:"password",value:t,onChange:e=>r(e.target.value)})]}),(0,a.jsx)("button",{type:"submit",children:"Login"})]}),p&&(0,a.jsx)("p",{style:{color:"crimson"},children:p}),o&&(0,a.jsxs)("div",{style:{marginTop:16},children:[(0,a.jsx)("button",{onClick:v,children:"Call /api/me"}),c&&(0,a.jsx)("pre",{style:{background:"#f5f5f5",padding:12,borderRadius:8},children:JSON.stringify(c,null,2)})]})]})}}},function(e){e.O(0,[464,971,117,744],function(){return e(e.s=4751)}),_N_E=e.O()}]);